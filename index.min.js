let e=0,t=document.head.appendChild(document.createElement("style"));function n(n,...o){let i={},r=t=>{let n=i[t];return n||(n="s"+ ++e,i[t]=n),n};return t.appendChild(document.createTextNode(n.slice(1).reduce(((e,t,n)=>[...e,o[n],t]),[n[0]]).join("").replace(/(@keyframes\s+|animation(?:-name)?\s*:\s*)([a-z0-9_-]+)/gi,((e,t,n)=>t+r(n))).replace(/\.([a-z0-9_-]+)/gi,((e,t)=>"."+r(t))))),i}let o=i();function i(){return{events:{},on(e,t){this.events[e]=(this.events[e]||[]).concat([t])},off(e,t){let n=this.events[e];n&&(this.events[e]=n.filter((e=>e!==t)))},once(e,t){let n=o=>{this.off(e,n),t(o)};this.on(e,n)},post(e,t){let n=this.events[e];n&&n.forEach((e=>e(t))),"any"!==e&&o.post("any",{hub:this,type:e,message:t})}}}let r=0,l={checked:1,selected:1,disabled:1,readonly:1,multiple:1};function a(e){return e.split(/({{}})/)}function s(e){return"{{}}"===e}function d(e){return e??""}function c(e,t){e.parentNode.insertBefore(t,e)}function u(e,t){switch(e.nodeType){case 1:for(let{name:n,value:i}of[...e.attributes])if(n in l&&s(i))t.shift()?e.setAttribute(n,""):e.removeAttribute(n);else if("on"===n.slice(0,2)&&s(i)){e.setAttribute(n,"//=>"+ ++r);let i=t.shift();e[n]=function(e){i.call(this,e),o.post("html-event",e)}}else e.setAttribute(n,a(i).map((e=>s(e)?d(t.shift()):e)).join(""));break;case 3:for(let n of a(e.textContent))if(s(n)){let n=t.shift();if(Array.isArray(n))for(let t of n)e.parentNode.insertBefore(t,e);else n instanceof Node?c(e,n):c(e,document.createTextNode(d(n)))}else c(e,document.createTextNode(n));e.parentNode.removeChild(e)}for(let n of[...e.childNodes])u(n,t)}function f(e,...t){let n=function(e){let t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}(e.join("{{}}"));return u(n,t),n}function h(e,t){let n=[...e.childNodes],o=[...t.childNodes],i=n.length,r=o.length;if(i<r)for(let t=i;t<r;t++)e.appendChild(o[t]);else if(i>r)for(let t=r;t<i;t++)e.removeChild(n[t]);let l=Math.min(i,r);for(let e=0;e<l;e++)m(n[e],o[e])}function m(e,t){if(!e.isEqualNode(t))if(e.nodeName!==t.nodeName)e.parentNode.replaceChild(t,e);else switch(e.nodeType){case 1:for(let{name:n,value:o}of t.attributes)e.getAttribute(n)!==o&&(e.setAttribute(n,o),"on"===n.slice(0,2)&&"//=>"===o.slice(0,4)&&(e[n]=t[n]));for(let{name:n}of[...e.attributes])t.hasAttribute(n)||e.removeAttribute(n);h(e,t);break;case 3:e.textContent!==t.textContent&&(e.textContent=t.textContent)}}let p,b=new Set;function v(e,t){return new Promise((e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)})).then((()=>{let n={container:document.querySelector(e),render:t};return b.add(n),C(),()=>b.delete(n)}))}function C(){cancelAnimationFrame(p),p=requestAnimationFrame((()=>{for(let{container:e,render:t}of b)h(e,t());o.post("update")}))}o.on("any",(e=>{e.hub===o&&"update"===e.type||C()}));export{i as Hub,f as html,o as hub,v as mount,n as style,C as update};
